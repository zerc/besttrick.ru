{% extends 'base.html' %}

{% block title %}Besttrick - покажи свой лучший трюк! Трюки на роликах, фристайл слалом, видео трюков, рейтинг роллеров{% endblock %}

{% block extra_head %}
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    {% assets "css_dev" %}
        <link rel="stylesheet" href="{{ ASSET_URL }}">
    {% endassets %}
    
    {% if user == False %}
        <script src="http://loginza.ru/js/widget.js" type="text/javascript"></script>
    {% endif %}
    
    {% assets "js_dev" %}
        <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}

    {% if user and user.admin > 0 %}
        <script type="text/javascript" src="{{ url_for('static', filename='js/admin.js') }}"></script>
    {% endif %}

    <script type="text/javascript" src="//yandex.st/share/share.js" charset="utf-8"></script>

    {% include 'counters.j2' %}
{% endblock %}


{% macro trick(x) %}
    <div class="col_4 trick">
        <a class="trick__title" href="#!trick0">Kazachok forward</a>
        <img class="align-left trick__thumb" src="/static/images/trick0-3.jpg" width="120" height="90" />
        
        {% if x % 2 == 0 %}
            <!-- 
                При клике на ссылку .trick__check появляется окошко формы - .trick__dialog.
                Чтобы все было пучком, для него считаются размеры и отступы относительно родительского 
                .trick элемента.
             -->
            <div class="trick__dialog dialog__overflow"></div>    
            <div class="trick__dialog">
                <a href="#" class="dialog__close pull-right">x</a>

                <div class="col_12">
                <input type="text" id="dialog__cones" class="text cones tooltip" title="На сколько конусов выполняете трюк?" placeholder="сколько банок?" value="" data-error-title="Только числа!"> <a href="#" class="dialog__save">сохранить</a>
                </div>

                <div class="col_12">
                <input type="text" id="dialog__video_url" class="text video_url tooltip" placeholder="ссылка на видео" value="" data-error-title="Это должна быть ссылка на видео с YouTube" title="Ссылка на ваше видео на YouTube"> или 
                <a href="#" class="upload_video_link">загрузить</a>
                </div>
            </div>
        {% endif %}

        <div class="trick__stats">
            <a class="trick__check pull-right" title="Я освоил этот трюк!">+</a>
            делают: 2
        </div>

        <div class="trick__best_user">
            <a href="#!users/user10" class="view_profile" title="Portret-ist(ФОТОГРАФ) лучше всех делает этот трюк!">
                Portret-ist(ФОТОГРАФ)
            </a> 
            10 банок
        </div>
    </div>
{% endmacro %}


{% macro more_tricks() %}
    <div class="col_4 trick">
        ЕЩЕ ...
    </div>
{% endmacro %}


{% block body %}
<div class="container">
    <div class="header">
        <a href="#!" class="logo" title="Видео трюков на роликах">BestTrick</a>
        <div class="clear"></div>
        <ul class="button-bar orange">
            <li class="inset"><a href="#">сидячие</a></li>
            <li><a href="#">вилинги</a></li>
            <li><a href="#">прыжковые</a></li>
            <li class="inset"><a href="#">вращательные</a></li>
            <li><a href="#">другие</a></li>
        </ul>
    </div>
    <div class="grid tricks">
        <h5 class="tricks__title"><a href="#">Freestyle Slalom</a></h5>
        {% for x in [1,2,3,4,5,6] %}
            {# more_tricks() if loop.last else trick(x) #}
            {{ trick(x) }}
        {% endfor %}
        <div class="clear"></div>
        <div style="margin-top:15px;"></div>
        <h5 class="tricks__title"><a href="#">Slides</a></h5>
        {% for x in [1,2,3,4,5,6] %}
            {{ trick(1) }}
        {% endfor %}
    </div>
</div>
{% endblock %}
